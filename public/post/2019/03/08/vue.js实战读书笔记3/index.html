<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Vue.js实战读书笔记（3） - 记录阅读Vue.js实战阅读中的一些问题和理解。  - Rehoni.</title>
    <meta property="og:title" content="Vue.js实战读书笔记（3） - Rehoni.">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="props 传递数据、 events 触发事件和 slot 内 容分发就构成了 Vue 组件的 3 个 API 来源，再复杂的组件也是由这 3 部分构成的。
[&amp;hellip;] slot用法：
[&amp;hellip;] 通过$slots 可以访问某个具名 slot, this .$slots.default 包括了所有没有被包含在具名 slot 中的节点。$slots 在业务中几乎用不到 ， &amp;hellip;">
      <meta property="og:description" content="props 传递数据、 events 触发事件和 slot 内 容分发就构成了 Vue 组件的 3 个 API 来源，再复杂的组件也是由这 3 部分构成的。
[&amp;hellip;] slot用法：
[&amp;hellip;] 通过$slots 可以访问某个具名 slot, this .$slots.default 包括了所有没有被包含在具名 slot 中的节点。$slots 在业务中几乎用不到 ， &amp;hellip;">
      
    

    
    

    

    
    


<link href='//cdn.bootcss.com/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="/css/custom.css" />

  </head>

  
  <body class="post">
    <header class="masthead">
      <h1><a href="/">Rehoni.</a></h1>

<p class="tagline">你有双牧羊人的眼睛，在你眼里谁是羊群，毫无头绪</p>

      <nav class="menu">
  <input id="menu-check" type="checkbox" />
  <label id="menu-label" for="menu-check" class="unselectable">
    <span class="icon close-icon">✕</span>
    <span class="icon open-icon">☰</span>
    <span class="text">Menu</span>
  </label>
  <ul>
  
  
  <li><a href="/">Home</a></li>
  
  <li><a href="/about/">About</a></li>
  
  <li><a href="/categories/">Categories</a></li>
  
  <li><a href="/tags/">Tags</a></li>
  
  <li><a href="/index.xml">Subscribe</a></li>
  
  
  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>Vue.js实战读书笔记（3）</h1>
<h1><span class="subtitle">记录阅读Vue.js实战阅读中的一些问题和理解。</span></h1>
<h3>
  2019-03-08</h3>
<hr>


      </header>





<h1 id="vue-js实战读书笔记">Vue.js实战读书笔记</h1>

<h2 id="slot分发内容">slot分发内容</h2>

<p>props 传递数据、 events 触发事件和 slot 内 容分发就构成了 Vue 组件的 3 个 API 来源，再复杂的组件也是由这 3 部分构成的。</p>

<ol>
<li>作用域：slot分发的内容作用域是在父组件上的。</li>

<li><p>slot用法：</p>

<ol>
<li>单个slot：父组件中进入子组件child-component，在child-component的模板内定义一个＜slot&gt;元素，并且用一个＜p＞作为默认的内容，在父组件没有使用 slot 时，会渲染这段默认的文本；如果写入了 slot， 那就会替换整个＜slot&gt;。 <strong>子组件<code>&lt;slot&gt;</code>内的备用内容，它的作用域是子组件本身</strong>。</li>
<li>具名slot：给＜slot&gt;元素指定一个 name 后可以分发多个内容，具名 Slot 可以与单个 Slot 共存。其中在＜div class＝”main与内的＜slot&gt; 没有使用 name 特性，它将作为默认 slot 出现，父组件没有使用 slot 特性的元素与内容都将出现在这里。如果没有指定默认的匿名 slot，父组件内多余的内容片段都将被抛弃。</li>
<li>作用域插槽：在＜slot&gt;元素上有一个类似 props 传递数据给组件的写法 msg＝”xxx”，将数据传到了插槽。父组件中使用了＜template＞元素，而且拥有一个 scope＝”props”的特性，这里的 props只是一个临时变量，就像 v-for=”item in items，里面的 item 一样。 template 内可以通过临时变量 props访问来自子组件插槽的数据 msg 。如果下例还在其他组件内使用，＜Ii＞的内容渲染权是由使用者掌握的，而数据却可以通过临时变量（比如 props ）从子组件内获取。</li>

<li><p>通过$slots 可以访问某个具名 slot, this .$slots.default 包括了所有没有被包含在具名 slot 中的节点。$slots 在业务中几乎用不到 ， 在用 render 函数（进阶篇中将介绍）创建组件时会比较有用，但主要还是用于独立组件开发中。</p>

<pre><code class="language-html">&lt;div id=&quot;app&quot;&gt;
&lt;my-list :books=&quot;books&quot;&gt;&lt;!--这里用v-bind语法糖，绑定父组件data中的book传入--&gt;
&lt;!--作用域插槽也可以是具名slot--&gt;
&lt;template slot=”book” scope=”props ”&gt;
  &lt;li&gt; {{props.bookName}}&lt;/li&gt;
&lt;/template&gt;
&lt;/my-list&gt;
&lt;/div&gt;
&lt;script&gt;
Vue.component('my-list',{
props:{
  books:{
    type:Array,
    default:function(){
      return [];
    }
  }
},
template:'\
&lt;ul&gt;\
  &lt;slot name=&quot;book&quot;\
  v-for=&quot;book in books&quot;\
  &lt;!--这里的:book-name对应props.bookName，是由驼峰命名法转化位kebab-case命名的--&gt;\
  :book-name=&quot;book.name&quot;&gt;\
  &lt;!--这里也可以写默认 slot 内容--&gt;\
  &lt;/slot&gt;\
&lt;/ul&gt;'
});

var app = new Vue({
el:'#app',
data:{
  books:[
    {name:'book1'},
    {name:'book2'},
    {name:'book3'}
  ]
}
})
&lt;/script&gt;
</code></pre></li>
</ol></li>
</ol>

<h2 id="组件高级用法">组件高级用法</h2>

<ol>
<li><p>组件递归
组件在它的模板内可以递归地调用自己 ， 只要给组件设置 name 的选项就可以了。设置 name 后，在组件模板内就可以递归使用了，不过需要注意的是，必须给一个条件来限制递归数量，否则会抛出错误 ： max stack size exceeded 。组件递归使用可以用来开发一些具有未知层级关系的独立组件，比如级联选择器和树形控件等</p>

<pre><code class="language-html">&lt;!--父组件中--&gt;
&lt;child-component : count= &quot;1&quot; &gt;&lt;/child- component&gt;
&lt;!--子组件中--&gt;
&lt;child-component :count=&quot;count + 1&quot;  v-if=&quot;count &lt; 3&quot; &gt;&lt;/child- component&gt;
</code></pre></li>

<li><p>内联模板
组件的模板一般都是在 template 选项内定义的， Vue 提供了一个内联模板的功能，在使用组件时，给组件标签使用 inline- mplate 特性，组件就会把它的内容当作模板，而不是把它当内容分发，这让模板更灵活。
在父组件中声明的数据 message 和子组件中声明的数据 msg ， 两个都可以渲染（如果同名，优先使用子组件的数据）。这反而是内联模板的缺点，就是作用域比较难理解，如果不是非常特殊的场景 ， 建议不要轻易使用内联模板。</p></li>

<li><p>动态组件 <code>&lt;component :is=&quot;currentView&quot;&gt;&lt;/component&gt;</code>动态改变currentView的值就可以动态挂载组件了，也可以直接绑定在组件对象上。</p></li>

<li><p>异步组件
工厂函数接收一个 resolve 回调，在收到从服务器下载的组件定义时调用。也可以调用reject(reason)指示加载失败。这里 setTimeout 只是为了演示异步，具体的下载逻辑可以自己决定，比如把组件配置写成一个对象配置，通过 Ajax 来请求，然后调用 resolve 传入配置选项。</p>

<pre><code class="language-html">&lt;div id=&quot;app&quot;&gt;
&lt;child-component&gt;&lt;/child-component&gt;
&lt;/div&gt;
&lt;script&gt;
Vue.component('child-component',
    function (resolve, reject) {
        window.setTimeout(function () {
            resolve({
                template: '&lt;div＞我是异步渲染的&lt;/div＞'
            });
        }, 2000)
    });
var app = new Vue({
    el: '#app'
})
&lt;/script&gt;
</code></pre></li>
</ol>

<h2 id="data什么时候需要作为函数return-什么时候不需要">data什么时候需要作为函数return，什么时候不需要</h2>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/post/2019/03/08/vue.js%E5%AE%9E%E6%88%98%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B02/">Vue.js实战读书笔记（2）</a></span>
  <span class="nav-next"><a href="/post/2019/03/18/elementui%E8%84%B1%E5%9D%91%E6%8C%87%E5%8D%97/">elementUI脱坑指南</a> &rarr;</span>
</nav>





<script src="//yihui.name/js/math-code.js"></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script async src="//yihui.name/js/center-img.js"></script>

  



<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/tex.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



  
  <hr>
  <div class="copyright">&copy; <a href="https://github.com/rehoni">Rehoni</a> 2019 | <a href="resliya@outlook.com">Email</a> | <a href="https://www.zhihu.com/people/luo-hao-37-27/activities">ZhiHu</a></div>
  
  </footer>
  </article>
  
  </body>
</html>

