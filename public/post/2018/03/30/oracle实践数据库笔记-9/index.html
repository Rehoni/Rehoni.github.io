<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Oracleå®è·µæ•°æ®åº“ç¬”è®°-9 - äº†è§£æ•°æ®åº“Oracleçš„å­˜å‚¨å±‚æ¬¡ç»“æ„ï¼Œç®¡ç†Oracleçš„è¡¨ç©ºé—´å’Œæ•°æ®æ–‡ä»¶çš„ç›¸å…³æŒ‡ä»¤ï¼Œä»¥åŠå®è·µ  - Rehoni.</title>
    <meta property="og:title" content="Oracleå®è·µæ•°æ®åº“ç¬”è®°-9 - Rehoni.">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="åˆ›å»ºè¡¨ç©ºé—´
desc dba_segments show parameter db_block_size create tablespace tbs1 datafile &#39;D:\app\hwj\oradata\sales\tbs1.dbf&#39; size 10m blocksize 2048;---æŠ¥é”™ alter session set nls_language=america;---è§£å†³æŠ¥é”™ &amp;hellip;">
      <meta property="og:description" content="åˆ›å»ºè¡¨ç©ºé—´
desc dba_segments show parameter db_block_size create tablespace tbs1 datafile &#39;D:\app\hwj\oradata\sales\tbs1.dbf&#39; size 10m blocksize 2048;---æŠ¥é”™ alter session set nls_language=america;---è§£å†³æŠ¥é”™ &amp;hellip;">
      
    

    
    

    

    
    


<link href='//cdn.bootcss.com/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="/css/custom.css" />

  </head>

  
  <body class="post">
    <header class="masthead">
      <h1><a href="/">Rehoni.</a></h1>

<p class="tagline">ä½ æœ‰åŒç‰§ç¾Šäººçš„çœ¼ç›ï¼Œåœ¨ä½ çœ¼é‡Œè°æ˜¯ç¾Šç¾¤ï¼Œæ¯«æ— å¤´ç»ª</p>

      <nav class="menu">
  <input id="menu-check" type="checkbox" />
  <label id="menu-label" for="menu-check" class="unselectable">
    <span class="icon close-icon">âœ•</span>
    <span class="icon open-icon">â˜°</span>
    <span class="text">Menu</span>
  </label>
  <ul>
  
  
  <li><a href="/">Home</a></li>
  
  <li><a href="/about/">About</a></li>
  
  <li><a href="/categories/">Categories</a></li>
  
  <li><a href="/tags/">Tags</a></li>
  
  <li><a href="/index.xml">Subscribe</a></li>
  
  
  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>Oracleå®è·µæ•°æ®åº“ç¬”è®°-9</h1>
<h1><span class="subtitle">äº†è§£æ•°æ®åº“Oracleçš„å­˜å‚¨å±‚æ¬¡ç»“æ„ï¼Œç®¡ç†Oracleçš„è¡¨ç©ºé—´å’Œæ•°æ®æ–‡ä»¶çš„ç›¸å…³æŒ‡ä»¤ï¼Œä»¥åŠå®è·µ</span></h1>
<h3>
  2018-03-30</h3>
<hr>


      </header>





<h1 id="03-30-å®è·µæ•°æ®åº“-ppt-d36245">03/30 å®è·µæ•°æ®åº“(PPT D36245)</h1>

<h2 id="ç®¡ç†è¡¨ç©ºé—´å’Œæ•°æ®æ–‡ä»¶">ç®¡ç†è¡¨ç©ºé—´å’Œæ•°æ®æ–‡ä»¶</h2>

<ol>
<li>æ•°æ®åº“çš„å­˜å‚¨å±‚æ¬¡ç»“æ„ PPT153

<ul>
<li>æ•°æ®åº“,</li>
<li>è¡¨ç©ºé—´,</li>
<li>æ®µ(å­˜å‚¨ç»“æ„)</li>
<li>åŒº(æœ€å°çš„ç©ºé—´åˆ†é…å•ä½)___ç©ºé—´ç®¡ç†

<ul>
<li>æ•°æ®å­—å…¸ç®¡ç†[å ç”¨ç³»ç»Ÿè¡¨ç©ºé—´,å¢åŠ ç³»ç»Ÿè´Ÿæ‹…,ç°å·²è¢«åºŸå¼ƒ]</li>
<li>æœ¬åœ°ç®¡ç† bitmapä½å›¾
extend_id bitmap
1           1
2           0 //å¯ç”¨</li>
</ul></li>
<li>å—(æœ€å°çš„IOå•ä½) æ ¹æ®è®¿é—®æ•°æ®é‡æ¥æ§åˆ¶å—çš„å•ä½å¤§å°</li>
<li>ç¢ç‰‡,æœ¬åœ°ç®¡ç†
ä¾æ®ç®¡ç†å’Œæ€§èƒ½åˆ†é…è¡¨ç©ºé—´
ç´¢å¼•å’Œæ•°æ®ä¸è¦æ”¾åœ¨ä¸€ä¸ªè¡¨ç©ºé—´é‡Œ</li>
</ul></li>
<li>ç©ºé—´ç®¡ç†

<ul>
<li>ç³»ç»Ÿç©ºé—´</li>
<li>éç³»ç»Ÿç©ºé—´</li>
</ul></li>

<li><p>åˆ›å»ºè¡¨ç©ºé—´</p>

<pre><code class="language-sql">    desc dba_segments
    show parameter db_block_size
    create tablespace tbs1 datafile 'D:\app\hwj\oradata\sales\tbs1.dbf' size 10m blocksize 2048;---æŠ¥é”™
    alter session set nls_language=america;---è§£å†³æŠ¥é”™ä¸º?????çš„åŠæ³•
    show parameter cache;
    alter system set db_2k_cache_size= 10m;
    create tablespace userdata datafile 'E:\app\Res0liya\oradata\orcl\userdata01.dbf' size 100m autoextend on next 5m maxsize 200m;---åˆ›å»ºè¡¨ç©ºé—´
    create tablespace userdata datafile 'E:\app\Res0liya\oradata\orcl\userdata01.dbf' size 100m extend management dictionary;---åˆ›å»ºè¡¨ç©ºé—´
    desc dba_tablespaces;---å¦‚æœä½ çš„systemè¡¨ç©ºé—´æ˜¯æœ¬åœ°ç®¡ç†localçš„,é‚£ä½ åªèƒ½åˆ›å»ºæœ¬åœ°ç®¡ç†è¡¨ç©ºé—´,å¦‚æœæ˜¯dictionaryçš„é‚£ä¹ˆä¸¤è€…éƒ½å¯ä»¥åˆ›å»º
</code></pre></li>

<li><p>è¡¨ç©ºé—´çš„ç±»å‹</p>

<ul>
<li><p>å¸¸è§„è¡¨ç©ºé—´</p>

<pre><code class="language-sql">select name from v$tablespace;
</code></pre></li>

<li><p>ä¸´æ—¶è¡¨ç©ºé—´(æ’åº)
æ•°æ®åº“å±æ€§è§†å›¾</p>

<pre><code class="language-sql">desc database_properties;
select property_name,property_value from database_properties;---default_temp_tablespaceä¸´æ—¶è¡¨ç©ºé—´,default_permament_tablespaceé»˜è®¤å¸¸è§„è¡¨ç©ºé—´
create tablespace users datafile 'E:\app\Res0liya\oradata\orcl\users01.dbf' size 30m;
alter database default tablespace users;---è®¾ç½®ä¸ºé»˜è®¤è¡¨ç©ºé—´
create temporary tablespace temp2 tempfile 'E:\app\Res0liya\oradata\orcl\users02.dbf' size 30m;
alter database default temporary tablespace temp2;
</code></pre></li>

<li><p>å¤§æ–‡ä»¶è¡¨ç©ºé—´ç†è§£ä¸€ä¸‹</p>

<pre><code class="language-sql">default_tbs_type ---smallfile
</code></pre></li>

<li><p>æ’¤é”€è¡¨ç©ºé—´(æ”¾å›æ»šçš„æ•°æ®çš„DMLä¿®æ”¹ä¹‹å‰å¯ä»¥å›æ»š)</p>

<pre><code class="language-sql">show parameter undo_tablespace;
create undo tablespace undotbs2 datafile 'E:\app\Res0liya\oradata\orcl\undotbs02.dbf' size 20m;
alter system set undo_tablespace=undotbs2;
</code></pre></li>
</ul></li>

<li><p>è¡¨ç©ºé—´çš„çŠ¶æ€</p>

<ul>
<li><p>æ­£å¸¸çŠ¶æ€(è”æœº,å¯è¯»å¯å†™)</p>

<pre><code class="language-sql">desc dba_tablespaces;
select tablespace_name,status from dba_tablespaces;---online,read only
create table scott.demo(id int,name varchar(20)) tablespace tbs1;
insert into scott.demo values(1,'luobo');
insert into scott.demo values(2,'aaa');
commit;
alter system checkpoint;
</code></pre></li>

<li><p>åªè¯»çŠ¶æ€</p>

<pre><code class="language-sql">alter tablespace tbs1 read only;
drop table scott.demo;---æ˜¯å¯ä»¥åˆ é™¤æ‰çš„
alter tablespace tbs1 read write;
flashback table demo to before drop;
</code></pre></li>

<li><p>è„±æœºçŠ¶æ€
ä¸èƒ½è„±æœºçš„è¡¨ç©ºé—´ <strong>system,undotbs1,æ‰€æœ‰çš„ä¸´æ—¶è¡¨ç©ºé—´</strong>
sysauxè¾…åŠ©ç³»ç»Ÿè¡¨ç©ºé—´,è‡ªåŠ¨ä¼˜åŒ–è°ƒæ•´,è‡ªåŠ¨åŒ–ç®¡ç†,èƒ½å¤Ÿè„±æœº,åŠŸèƒ½å¤±æ•ˆ
undotbsæ’¤é”€è¡¨ç©ºé—´,æ´»åŠ¨/å½“å‰çš„undotbsä¸èƒ½å¤Ÿè„±æœº</p>

<pre><code class="language-sql">alter tablespace system offline;---online
</code></pre></li>
</ul></li>

<li><p>åˆ é™¤è¡¨ç©ºé—´</p>

<pre><code class="language-sql">    drop tablespace tbs1;---å†…å®¹ä¸æ˜¯ç©ºçš„,å°±ä¸èƒ½åˆ 
    drop tablespace tbs1 including contents;
</code></pre></li>

<li><p>OMFçš„è¡¨ç©ºé—´</p>

<pre><code class="language-sql">    show parameter db_create;
    alter system set db_create_file_dest;
    create tablespace tbs2;---æŠ¥é”™
    create tablespace tbs2 datafile 'path' size 10m;
    drop tablespace tbs2;---æ–‡ä»¶æ²¡è¢«åˆ æ‰
    alter system set db_create_file_dest='E:\app\OMF\dest';
    create tablespace tbs2;
    select tablespace name,file_name from æŸä¸ªè¡¨;
    drop tablespace tbs2;---æ–‡ä»¶è¢«åˆ æ‰
</code></pre></li>

<li><p>æ‰©å±•è¡¨ç©ºé—´ PPT167</p>

<ul>
<li><p>ä¿®æ”¹åŸæ•°æ®æ–‡ä»¶çš„å¤§å°</p>

<ul>
<li>è‡ªåŠ¨æ‰©å±•</li>

<li><p>æ‰‹åŠ¨æ‰©å±•</p>

<pre><code class="language-sql">ALTER DATABASE DATAFILE
'/u01/oradata/userdata02.dbf' SIZE 200M
AUTOEXTEND ON NEXT 10M MAXSIZE 500M;
ALTER DATABASE
DATAFILE '/u03/oradata/userdata02.dbf'
RESIZE 200M;
</code></pre></li>
</ul></li>

<li><p>æ·»åŠ æ–°çš„æ•°æ®æ–‡ä»¶</p>

<pre><code class="language-sql">ALTER TABLESPACE app_data
ADD DATAFILE '/u01/oradata/userdata03.dbf'
SIZE 200M;
</code></pre></li>
</ul></li>

<li><p>ç§»åŠ¨æ•°æ®æ–‡ä»¶ PPT171</p>

<ul>
<li>å¯ä»¥ç§»åŠ¨ ä¸å†ç”¨çš„æ–‡ä»¶</li>
<li>ç‰©ç†ç§»åŠ¨</li>
<li>æ›´æ–°æ§åˆ¶æ–‡ä»¶</li>
</ul></li>
</ol>

<h2 id="å®éªŒ">å®éªŒ</h2>

<p>åˆ›å»ºUSERSè¡¨ç©ºé—´,å¹¶è®¾ç½®ä¸ºæ•°æ®åº“é»˜è®¤çš„æ°¸ä¹…è¡¨ç©ºé—´</p>

<ol>
<li>åˆ›å»ºä¸€ä¸ªç”±4Kçš„å—ç»„æˆè¡¨ç©ºé—´TEST(TEST01.dbf 10M) ğŸ†—</li>
<li>å‘TESTè¡¨ç©ºé—´å¢åŠ ä¸€ä¸ª10Mçš„æ•°æ®æ–‡ä»¶(TEST02.dbf),å°†TEST01.DBFä¿®æ”¹ä¸º15m ğŸ†—</li>
<li>ç§»åŠ¨TEST01.DBF ğŸ†—</li>
<li>åœ¨TESTè¡¨ç©ºé—´å†…åˆ›å»ºä¸€å¼ è¡¨table1(insert)ğŸ†—</li>
<li>å°†TESTè¡¨ç©ºé—´æ”¹ä¸ºread onlyğŸ†—</li>
<li>åˆ é™¤è¡¨table1ğŸ†—</li>
<li>å°†è¡¨ç©ºé—´æ”¹ä¸ºread writeğŸ†—</li>
<li>åˆ é™¤TESTè¡¨ç©ºé—´ æ£€æµ‹æ•°æ®æ–‡ä»¶æ˜¯å¦è¢«åˆ é™¤ğŸ†—</li>
<li>OMFåˆ›å»ºè¡¨ç©ºé—´ æ£€æµ‹æ•°æ®æ–‡ä»¶æ˜¯å¦è¢«åˆ é™¤ğŸ†—</li>
<li>åˆ›å»º1ä¸ªæ’¤é”€è¡¨ç©ºé—´undotbs2,å¹¶æŠŠå®ƒè®¾ä¸ºç³»ç»Ÿå½“å‰çš„æ’¤é”€è¡¨ç©ºé—´ğŸ†—</li>
<li>åˆ›å»ºä¸´æ—¶è¡¨ç©ºé—´temp2,å¹¶æŠŠå®ƒè®¾ä¸ºæ•°æ®åº“é»˜è®¤çš„ä¸´æ—¶è¡¨ç©ºé—´ğŸ†—</li>

<li><p>æ²¡æœ‰å¤‡ä»½çš„æ¢å¤(å½’æ¡£æ¨¡å¼)</p>

<ul>
<li>åˆ›å»ºä¸€ä¸ªè¡¨ç©ºé—´TBS1(TBS1.DBF)ğŸ†—</li>
<li>åœ¨TBS1è¡¨ç©ºé—´å†…åˆ›å»ºä¸€å¼ è¡¨T1ğŸ†—</li>
<li>shutdown immediateğŸ†—</li>
<li>æ‰‹å·¥åˆ é™¤è¡¨ç©ºé—´TBS1çš„æ•°æ®æ–‡ä»¶ğŸ†—</li>
<li>startupğŸ†—</li>
<li>å°†æ•°æ®æ–‡ä»¶TBS1.DBFè„±æœºğŸ†—</li>
<li>alter database open;ğŸ†—</li>
<li>alter database create datafile &lsquo;pth\tbs1.bdf&rsquo;;ğŸ†—</li>
<li>recover datafile &lsquo;path\tbs1.dbf&rsquo;;ğŸ†—</li>
<li>å°†æ•°æ®æ–‡ä»¶TBS1.DBFè”æœºğŸ†—</li>

<li><p>æ£€æŸ¥æ•°æ®æ˜¯å¦æ¢å¤ğŸ†—</p>

<pre><code class="language-sql">create tablespace TEST datafile 'E:\app\Res0liya\oradata\orcl\test01.dbf' size 10m blocksize 4096;---æŠ¥é”™
alter system set db_4k_cache_size=10m;
create tablespace TEST datafile 'E:\app\Res0liya\oradata\orcl\test01.dbf' size 10m blocksize 4096;
alter tablespace TEST add datafile 'E:\app\Res0liya\oradata\orcl\test02.dbf' size 10m;
alter database datafile 'E:\app\Res0liya\oradata\orcl\test01.dbf' resize 15m;
select tablespace_name,status from dba_tablespaces;
alter tablespace test offline;
alter tablespace TEST
2  rename
3  datafile 'E:\app\Res0liya\oradata\orcl\test01.dbf'
4  to 'E:\app\Res0liya\oradata\test01.dbf';
alter tablespace TEST online;
create table scott.table1(id int,name varchar(20)) tablespace test;
insert into scott.table1 values(1,'luobo');
insert into scott.table1 values(2,'aaa');
alter tablespace TEST read only;
select tablespace_name,status from dba_tablespaces;
drop table scott.table1;
alter tablespace TEST read write;
drop tablespace TEST;---æ•°æ®æ–‡ä»¶æœªè¢«åˆ é™¤
show parameter db_create;
alter system set db_create_file_dest='E:\app\OMF';
create tablespace TEST;
drop tablespace TEST;---æ•°æ®æ–‡ä»¶åˆ é™¤äº†
create undo tablespace undotbs2 datafile 'E:\app\Res0liya\oradata\orcl\undotbs2.dbf' size 30m;
alter system set undo_tablespace=undotbs2;
show parameter undo_tablespace;---æŸ¥è¯¢
create temporary tablespace temp2 tempfile 'E:\app\Res0liya\oradata\orcl\temp2.dbf' size 30m;
alter database default temporary tablespace temp2;
select property_name,property_value from database_properties;---æŸ¥è¯¢
col PROPERTY_NAME for a32;
col PROPERTY_VALUE for a32;
select property_name,property_value from database_properties;
create tablespace TBS1 datafile 'E:\app\Res0liya\oradata\orcl\tbs01.dbf' size 30m;
select tablespace_name,status from dba_tablespaces;---æŸ¥è¯¢
</code></pre>

<pre><code class="language-sql">create tablespace TBS1 datafile 'E:\app\Res0liya\oradata\orcl\tbs01.dbf' size 30m;
select tablespace_name,status from dba_tablespaces;
create table scott.t1(id int);
insert table scott.t1 values (1);
commit;
alter system checkpoint;
shutdown immediate
åˆ é™¤æœ¬åœ°æ–‡ä»¶tbs01.dbf
startup---æŠ¥é”™
ORA-01157: æ— æ³•æ ‡è¯†/é”å®šæ•°æ®æ–‡ä»¶ 8 - è¯·å‚é˜… DBWR è·Ÿè¸ªæ–‡ä»¶
ORA-01110: æ•°æ®æ–‡ä»¶ 8: 'E:\APP\RES0LIYA\ORADATA\ORCL\TBS01.DBF'
alter database datafile 8 offline;---æŠ¥é”™
archive log list;---æ£€æŸ¥æ˜¯ä¸æ˜¯å½’æ¡£æ¨¡å¼
alter database archivelog;--è®¾ç½®äº†å½’æ¡£æ¨¡å¼(è§ä¹‹å‰çš„ç¬”è®°)ä¹‹åå°±ä¸ä¼šæŠ¥é”™
alter database open;
alter database create datafile 'E:\APP\RES0LIYA\ORADATA\ORCL\TBS01.DBF';
recover datafile 'E:\APP\RES0LIYA\ORADATA\ORCL\TBS01.DBF';
alter database datafile 8 online;
æœ¬åœ°æ–‡ä»¶tbs01.dbfå›æ¥äº†
desc scott.t1;
select * from scott.t1;
</code></pre></li>
</ul></li>
</ol>

<p><strong>Oracleæœ€åŸºç¡€çš„éƒ¨åˆ†å·²ç»ç»“æŸäº†,åè¾¹çš„éƒ¨åˆ†å¯ä»¥è‡ªå­¦äº†</strong>å•§</p>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/post/2018/03/27/oracle%E5%AE%9E%E8%B7%B5%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0-8/">Oracleå®è·µæ•°æ®åº“ç¬”è®°-8</a></span>
  <span class="nav-next"><a href="/post/2018/04/03/oracle%E5%AE%9E%E8%B7%B5%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0-10/">Oracleå®è·µæ•°æ®åº“ç¬”è®°-10</a> &rarr;</span>
</nav>





<script src="//yihui.name/js/math-code.js"></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script async src="//yihui.name/js/center-img.js"></script>

  



<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/tex.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



  
  <hr>
  <div class="copyright">&copy; <a href="https://github.com/rehoni">Rehoni</a> 2019 | <a href="resliya@outlook.com">Email</a> | <a href="https://www.zhihu.com/people/luo-hao-37-27/activities">ZhiHu</a></div>
  
  </footer>
  </article>
  
  </body>
</html>

