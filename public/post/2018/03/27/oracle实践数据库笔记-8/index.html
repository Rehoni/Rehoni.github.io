<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Oracleå®è·µæ•°æ®åº“ç¬”è®°-8 - äº†è§£Oracleå¯¹æ§åˆ¶æ–‡ä»¶ctlçš„ç®¡ç†å’Œå¯¹æ—¥å¿—æ–‡ä»¶rogçš„ç®¡ç†å’Œæ“ä½œ  - Rehoni.</title>
    <meta property="og:title" content="Oracleå®è·µæ•°æ®åº“ç¬”è®°-8 - Rehoni.">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="oradebug dump controlf 3 oradebug setmypid oradebug tracefile_name
alter session set nls_language=american
[&amp;hellip;] æ§åˆ¶æ–‡ä»¶çš„å¤ç”¨ğŸ†— å†…å®¹ä¸€æ¨¡ä¸€æ ·ï¼Œåšå¤šä¸ªåŒæ ·çš„æ§åˆ¶æ–‡ä»¶æ”¾åœ¨ä¸åŒçš„åœ°æ–¹
è§ppt 126/383 alter system set control_files = &amp;hellip;">
      <meta property="og:description" content="oradebug dump controlf 3 oradebug setmypid oradebug tracefile_name
alter session set nls_language=american
[&amp;hellip;] æ§åˆ¶æ–‡ä»¶çš„å¤ç”¨ğŸ†— å†…å®¹ä¸€æ¨¡ä¸€æ ·ï¼Œåšå¤šä¸ªåŒæ ·çš„æ§åˆ¶æ–‡ä»¶æ”¾åœ¨ä¸åŒçš„åœ°æ–¹
è§ppt 126/383 alter system set control_files = &amp;hellip;">
      
    

    
    

    

    
    


<link href='//cdn.bootcss.com/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="/css/custom.css" />

  </head>

  
  <body class="post">
    <header class="masthead">
      <h1><a href="/">Rehoni.</a></h1>

<p class="tagline">ä½ æœ‰åŒç‰§ç¾Šäººçš„çœ¼ç›ï¼Œåœ¨ä½ çœ¼é‡Œè°æ˜¯ç¾Šç¾¤ï¼Œæ¯«æ— å¤´ç»ª</p>

      <nav class="menu">
  <input id="menu-check" type="checkbox" />
  <label id="menu-label" for="menu-check" class="unselectable">
    <span class="icon close-icon">âœ•</span>
    <span class="icon open-icon">â˜°</span>
    <span class="text">Menu</span>
  </label>
  <ul>
  
  
  <li><a href="/">Home</a></li>
  
  <li><a href="/about/">About</a></li>
  
  <li><a href="/categories/">Categories</a></li>
  
  <li><a href="/tags/">Tags</a></li>
  
  <li><a href="/index.xml">Subscribe</a></li>
  
  
  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>Oracleå®è·µæ•°æ®åº“ç¬”è®°-8</h1>
<h1><span class="subtitle">äº†è§£Oracleå¯¹æ§åˆ¶æ–‡ä»¶ctlçš„ç®¡ç†å’Œå¯¹æ—¥å¿—æ–‡ä»¶rogçš„ç®¡ç†å’Œæ“ä½œ</span></h1>
<h3>
  2018-03-27</h3>
<hr>


      </header>





<h1 id="3-27-å®ä¾‹æ•°æ®åº“"><sup>3</sup>&frasl;<sub>27</sub> å®ä¾‹æ•°æ®åº“</h1>

<h2 id="ç®¡ç†æ§åˆ¶æ–‡ä»¶">ç®¡ç†æ§åˆ¶æ–‡ä»¶</h2>

<ol>
<li>æ§åˆ¶æ–‡ä»¶çš„ä½œç”¨â“</li>
<li>æ§åˆ¶æ–‡ä»¶çš„å†…å®¹â“äºŒè¿›åˆ¶</li>
</ol>

<p>oradebug dump controlf 3
oradebug setmypid
oradebug tracefile_name</p>

<p>alter session set nls_language=american</p>

<ol>
<li><p>æ§åˆ¶æ–‡ä»¶çš„å¤ç”¨ğŸ†—
å†…å®¹ä¸€æ¨¡ä¸€æ ·ï¼Œåšå¤šä¸ªåŒæ ·çš„æ§åˆ¶æ–‡ä»¶æ”¾åœ¨ä¸åŒçš„åœ°æ–¹</p>

<pre><code class="language-sql">è§ppt 126/383
alter system set control_files = 'path1','path2','path3' scope=spfile;
shutdown
cp 'path1'/'path2' 'path3';
startup
show parameter control_files;
</code></pre></li>

<li><p>åˆ›å»ºæ§åˆ¶æ–‡ä»¶</p>

<pre><code class="language-sql">alter database backup controlfile to trace as 'e:\trace_controlf.txt'
alter database mount
åˆ é™¤æ§åˆ¶æ–‡ä»¶ä¹‹åå¯åŠ¨æŠ¥é”™å†å¯åŠ¨ä¸€ä¸‹è„šæœ¬
è¯­å¥åœ¨trace_controlf.txté‡Œè¾¹è·‘ä¸€ä¸‹
</code></pre></li>
</ol>

<p>å®éªŒï¼š</p>

<ol>
<li>æŸ¥çœ‹æ§åˆ¶æ–‡ä»¶çš„åç§°å’Œå†…å®¹ğŸ†—
select name &hellip;
show parameter control_files;
oradebug &hellip;è§ä¸Š</li>
<li>æ§åˆ¶æ–‡ä»¶çš„å¤ç”¨ğŸ†—</li>
<li>åˆ›å»ºæ§åˆ¶æ–‡ä»¶</li>
</ol>

<p><strong>ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œå†çœ‹å¤§ä½¬æ¼”ç¤ºä¸€ä¸‹è·‘ä¸€ä¸‹è„šæœ¬</strong></p>

<h2 id="ç®¡ç†æ—¥å¿—æ–‡ä»¶">ç®¡ç†æ—¥å¿—æ–‡ä»¶</h2>

<ol>
<li>æ—¥å¿—æ–‡ä»¶çš„ä½œç”¨</li>
<li>æ—¥å¿—å·¥ä½œä½“ç³»</li>

<li><p>æ—¥å¿—ç®¡ç†</p>

<p><strong>åŠ¡å¿…ææ¸…æ¥šä¸€ä¸‹switchå’Œcheckpointä¸¤æ¡å‘½ä»¤</strong> ğŸ˜‹</p>

<ul>
<li>æŸ¥è¯¢æ—¥å¿—æ–‡ä»¶ç»„ï¼Œæ—¥å¿—æ–‡ä»¶æˆå‘˜ï¼Œå½’æ¡£æ—¥å¿—ğŸ†—
descä¸€ä¸‹å°±çŸ¥é“äº†v$log v$logfile v$archived_log</li>

<li><p>æ·»åŠ æ—¥å¿—æ–‡ä»¶ç»„ğŸ†—</p>

<pre><code class="language-sql">alter database add logfile group 4;
</code></pre></li>

<li><p>å‘æ—¥å¿—æ–‡ä»¶ç»„æ·»åŠ æˆå‘˜ğŸ†—</p>

<pre><code class="language-sql">alter database add logfile member 'path' to group 4;
</code></pre></li>

<li><p>åˆ é™¤æ—¥å¿—æ–‡ä»¶æˆå‘˜ğŸ†—</p>

<pre><code class="language-sql">alter database drop logfile member 'path' to group 4;
select group#ï¼Œstatus from v$log;
</code></pre></li>

<li><p>åˆ é™¤æ—¥å¿—æ–‡ä»¶ç»„ğŸ†—
æ—¥å¿—ç»„åˆ é™¤æ—¶æ—¥å¿—æ–‡ä»¶è¿˜åœ¨ä¸åœ¨ï¼š
å¦‚æœæ˜¯OMFæ—¥å¿—æ–‡ä»¶åˆ™ä¸åœ¨ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯åœ¨çš„</p>

<pre><code class="language-sql">alter database drop logfile group 4;
</code></pre></li>

<li><p>æ¸…é™¤æ—¥å¿—æ–‡ä»¶ğŸ†—</p>

<pre><code class="language-sql">alter database clear logfile 'path';
</code></pre></li>

<li><p>OMF æ²¡å¬
åˆ›å»ºä¸€ä¸ªè·¯å¾„æ”¾å…¥æ—¥å¿—æ–‡ä»¶ï¼ŒOMFå½¢å¼</p></li>

<li><p>è®¾ç½®å½’æ¡£æ¨¡å¼</p>

<pre><code class="language-sql">---è¦åœ¨ mountæ¨¡å¼ä¸‹
startup mount
alter database archivelog;
archive log list;
alter database noarchivelog;
</code></pre></li>

<li><p>è®¾ç½®å½’æ¡£ç›®çš„åœ°</p></li>

<li><p>æ‰‹åŠ¨å½’æ¡£</p>

<pre><code class="language-sql">show parameter log_archive
alter system set log_archive_dest_1='location=path1'
alter system archieve log current
</code></pre></li>

<li><p>ç§»åŠ¨æˆ–è€…é‡å‘½åæ—¥å¿—æ–‡ä»¶</p>

<pre><code class="language-sql">select group#, from v$logfile
shutdown immediateä¹‹åå‰ªåˆ‡ï¼ˆä»åŸè·¯å¾„ï¼‰ä¸€ä¸ªlogæ–‡ä»¶åˆ°åˆ«çš„ç›®å½•ï¼ˆç°åœ¨è·¯å¾„ï¼‰
startup mountä¸æŠ¥é”™ï¼Œä¸æ£€æµ‹æ—¥å¿—æ–‡ä»¶
alter database openæŠ¥é”™ï¼Œçœ‹æŠ¥é”™ä¿¡æ¯ï¼Œæ‰¾E:\app\Res0liya\diag\rdbms\orcl\orcl\traceç›®å½•ä¸‹çš„alert_orcl.logçœ‹æŠ¥é”™ä¿¡æ¯ï¼Œä»ååˆ°å‰
select menber from v$logfile
alter database rename file 'åŸè·¯å¾„' to 'ç°åœ¨è·¯å¾„'
alter database openå°±ä¸æŠ¥é”™äº†
</code></pre></li>

<li><p>ä¿®å¤æ—¥å¿—æ–‡ä»¶</p>

<ul>
<li><p>éå½“å‰çš„æ–‡ä»¶å‡ºé—®é¢˜</p>

<pre><code class="language-sql">select group#,status from v$log;
alter database clear logfile group 1;
alter database open
</code></pre></li>

<li><p>å½“å‰çš„æ–‡ä»¶å‡ºé—®é¢˜</p>

<pre><code class="language-sql">recover database until cancel;
alter database open;æŠ¥é”™
alter database open resetlogs;é‡æ–°åˆ›å»ºæ–°æ—¥å¿—æ–‡ä»¶
</code></pre></li>
</ul></li>
</ul></li>
</ol>

<h2 id="å…¶ä»–ä»£ç ">å…¶ä»–ä»£ç </h2>

<pre><code class="language-sql">    ORA-24324: æœªåˆå§‹åŒ–æœåŠ¡å¥æŸ„
    ORA-01041: å†…éƒ¨é”™è¯¯, hostdef æ‰©å±•åä¸å­˜åœ¨
    å‡ºç°shutdowné—®é¢˜é‡‡ç”¨
    shutdown abort
</code></pre>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/post/2018/03/23/oracle%E5%AE%9E%E8%B7%B5%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0-7/">Oracleå®è·µæ•°æ®åº“ç¬”è®°-7</a></span>
  <span class="nav-next"><a href="/post/2018/03/30/oracle%E5%AE%9E%E8%B7%B5%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0-9/">Oracleå®è·µæ•°æ®åº“ç¬”è®°-9</a> &rarr;</span>
</nav>





<script src="//yihui.name/js/math-code.js"></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script async src="//yihui.name/js/center-img.js"></script>

  



<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/tex.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



  
  <hr>
  <div class="copyright">&copy; <a href="https://github.com/rehoni">Rehoni</a> 2019 | <a href="resliya@outlook.com">Email</a> | <a href="https://www.zhihu.com/people/luo-hao-37-27/activities">ZhiHu</a></div>
  
  </footer>
  </article>
  
  </body>
</html>

