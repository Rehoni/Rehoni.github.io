<!DOCTYPE html>
<html lang="en-us">

  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Vue.js实战读书笔记（2） - Rehoni | 罗皓</title>
    <meta property="og:title" content="Vue.js实战读书笔记（2） - Rehoni | 罗皓">
    
    <meta name="twitter:card" content="summary">

    
    
      
    

    
      
      <meta property="description" content="修饰符：lazy（change事件中同步），number（限定数字），trim（自动过滤首位的输入空格），
[&amp;hellip;] template的DOM结构必须被一个元素包含，如果直接写成 “这里是组件 的内容”，不带&amp;lt;div&amp;gt;&amp;lt;/div&amp;gt;是无法渲染的。
[&amp;hellip;] Vue 组件的模板在某些情况下会受到HTML的限制，比如＜table＞内规定只允许是〈 &amp;hellip;">
      <meta property="og:description" content="修饰符：lazy（change事件中同步），number（限定数字），trim（自动过滤首位的输入空格），
[&amp;hellip;] template的DOM结构必须被一个元素包含，如果直接写成 “这里是组件 的内容”，不带&amp;lt;div&amp;gt;&amp;lt;/div&amp;gt;是无法渲染的。
[&amp;hellip;] Vue 组件的模板在某些情况下会受到HTML的限制，比如＜table＞内规定只允许是〈 &amp;hellip;">
      
    

    
    
    
    
    <meta name="twitter:image" content="//localhost:1313/images/logo.jpg">
    
    

    

    
    


<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/styles/monokai-sublime.min.css">



    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
<script async src="/js/load-typekit.js"></script>


<link rel="stylesheet" href="/css/custom.css" />

  </head>
  <body class="cn">
    <header class="masthead">
      

<h1><a href="/"><img src="/images/logo.jpg" alt="Luo Hao" /></a></h1>



      <nav class="menu">
  <ul>
  
  
  <li><a href="/">首页</a></li>
  
  <li><a href="/cn/about/">关于</a></li>
  
  <li><a href="/cn/">日志</a></li>
  
  <li><a href="/categories/">分类</a></li>
  
  <li><a href="/tags/">标签</a></li>
  
  <li><a href="/cn/vitae/">简历</a></li>
  
  <li><a href="/en/">English</a></li>
  
  

<li class="menu-extra"></li>



<li><a href="https://github.com/rehonicn%5c2019%5c2019-03-08-vue-2.md" target="_blank">编辑</a></li>


<li><a href="/cn/index.xml" type="application/rss+xml" title="RSS feed">订阅</a></li>

<li><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="Attribution-NonCommercial-ShareAlike 4.0 International">版权</a></li>


  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>Vue.js实战读书笔记（2）</h1>


<h3>Rehoni / 
2019-03-08</h3>

<hr>


      </header>





<h3 id="学习链接">学习链接：</h3>
<ol>
<li>Vue官方教程 <a href="https://cn.vuejs.org/">https://cn.vuejs.org/</a></li>
<li><a href="https://www.w3cplus.com/blog/vue">https://www.w3cplus.com/blog/vue</a></li>
</ol>
<h3 id="v-model-绑定动态数据可以用v-bind来实现">v-model: 绑定动态数据可以用v-bind来实现。</h3>
<ol>
<li>
<p>修饰符：lazy（change事件中同步），number（限定数字），trim（自动过滤首位的输入空格），</p>
</li>
<li>
<p>template的DOM结构必须被一个元素包含，如果直接写成 “这里是组件 的内容”，不带<code>&lt;div&gt;&lt;/div&gt;</code>是无法渲染的。</p>
</li>
<li>
<p>Vue 组件的模板在某些情况下会受到HTML的限制，比如＜table＞内规定只允许是〈位〉、＜td＞、&lt;th＞等这些表格元素，所以在＜table＞内直接使用组件是无效的。这种情况下，可以使用特殊的is属性来挂载组件。 <code>&lt;tbody is=&quot;my-component&quot;&gt;&lt;/tbody&gt;</code>tbody在渲染时，会被替换为组件的内容。常见的限制元素还有＜ul＞、＜ol＞、＜select&gt;。</p>
</li>
</ol>
<h3 id="props-数组和对象">props: 数组和对象。</h3>
<ol>
<li>
<p>props 中声明的数据与组件 data 函数 return 的数据主要区别就是： props 的来自父级，而 data 中的是组件自己的数据，作用域是组件本身，这两种数据都可以在模板 template 及计算属性 computed和方法 methods 中使用。</p>
</li>
<li>
<p>由于 HT岛E 特性不区分大小写，当使用 DOM 模板时，驼峰命名 (camelCase)的 props 名称要转为短横分隔命名 (kebab-case)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34; app” &gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> &lt;my-component warning-text ＝ ”提示信息 &#34;</span> <span style="color:#960050;background-color:#1e0010">＞＜／</span> <span style="color:#a6e22e">my-component</span>&gt;
</span></span><span style="display:flex;"><span> &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span> &lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span> <span style="color:#a6e22e">Vue</span>.<span style="color:#a6e22e">component</span> ( <span style="color:#e6db74">&#39; my-component &#39;</span>, {
</span></span><span style="display:flex;"><span> <span style="color:#a6e22e">props</span><span style="color:#f92672">:</span> [ <span style="color:#e6db74">&#39;warningText&#39;</span>],
</span></span><span style="display:flex;"><span> <span style="color:#a6e22e">template</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39; &lt;div&gt;{{ warningText }} &lt;/div&gt;&#39;</span>
</span></span><span style="display:flex;"><span> });
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">app</span> <span style="color:#f92672">=</span><span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Vue</span>({
</span></span><span style="display:flex;"><span> <span style="color:#a6e22e">el</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39; #app &#39;</span>
</span></span><span style="display:flex;"><span> })
</span></span><span style="display:flex;"><span> &lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div></li>
<li>
<p>有时候，传递的数据并不是直接写死的，而是来自父级的动态数据，这时可以使用指令 v-bind 来动态绑定 props 的值，当父组件的数据变化时，也会传递给子组件。</p>
</li>
<li>
<p>如果你要直接传递数字、布尔值、数组、对象，而且不使用v-bind，传递的仅仅是字符串。下边message.length=7，而:message.length=3。</p>
</li>
<li>
<p>在JavaScript中对象和数组是引用类型，指向同一个内存空间，所以 props 是对象和数组时，在子组件内改变是会影响父组件的。</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34; app &#34;</span> &gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">my-component</span> <span style="color:#a6e22e">message</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34; [ 1 , 2, 3 ] &#34;</span> &gt;&lt;/<span style="color:#f92672">my-component</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">my-component</span> <span style="color:#a6e22e">:message</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34; [ 1 , 2, 3 ] &#34;</span> &gt;&lt;/<span style="color:#f92672">my-component</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Vue</span>.<span style="color:#a6e22e">component</span> (<span style="color:#e6db74">&#39; my-component &#39;</span>, {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">props</span><span style="color:#f92672">:</span> [ <span style="color:#e6db74">&#39; message &#39;</span> ],
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">template</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;&lt;div&gt;{{ message.length }}&lt;/div&gt;&#39;</span>
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">app</span> <span style="color:#f92672">=</span><span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Vue</span> ( {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">el</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;#app&#39;</span>
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div><h3 id="数据验证">数据验证</h3>
<ul>
<li>
<p>type: String, Number, Boolean, Object, Array, Function。type也可以是一个自定义构造器，使用instanceof检测。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">Vue</span>.<span style="color:#a6e22e">component</span>(<span style="color:#e6db74">&#39;my-component&#39;</span>,{
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">props</span> <span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">／／</span><span style="color:#a6e22e">必须是数字类型</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">propA</span> <span style="color:#f92672">:</span> Number ,
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">／／</span><span style="color:#a6e22e">必须是字符串或数字类型</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">propB</span> <span style="color:#f92672">:</span> [String , Number] ,
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">／／</span><span style="color:#a6e22e">布尔值</span><span style="color:#960050;background-color:#1e0010">，</span><span style="color:#a6e22e">如果没有定义</span><span style="color:#960050;background-color:#1e0010">，</span><span style="color:#a6e22e">默认值就是</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">propC</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">type</span> <span style="color:#f92672">:</span> Boolean ,
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">default</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">／／</span><span style="color:#a6e22e">数字</span><span style="color:#960050;background-color:#1e0010">，</span><span style="color:#a6e22e">而且是必传</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">propD</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> Number ,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">required</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">／／</span><span style="color:#a6e22e">如果是数组或对象</span><span style="color:#960050;background-color:#1e0010">，</span><span style="color:#a6e22e">默认值必须是一个函数来返回</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">propE</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">type</span> <span style="color:#f92672">:</span> Array ,
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">default</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> () {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> [] ;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">／／</span><span style="color:#a6e22e">自定义一个验证函数</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">propF</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">validator</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">value</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">value</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">10</span>;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div></li>
</ul>
<h3 id="组件通信">组件通信</h3>
<ol>
<li>自定义事件：如果你了解过 JavaScript 的设计模式一一观察者模式， 一定知道 dispatchEvent 和 addEventListener这两个方法。 Vue 组件也有与之类似的一套模式，子组件用 $emit（）来触发事件，父组件用 $on（）来监听子组件的事件 。</li>
<li>中央事件总线(bus)：首先创建了 一个名为 bus 的空 Vue 实例，里面没有任何内容；然后全局定义了组件component-a；最后创建 Vue 实例 app ，在 app 初始化时，也就是在生命周期 mounted 钩子函数里监听了来自 bus 的事件 on-message，而在组件 component-a 中，点击按钮会通过 bus 把事件 on-message发出去，此时 app 就会接收到来自 bus 的事件，进而在回调里完成自己的业务逻辑。如果深入使用，可以扩展 bus 实例，给它添加 data 、 methods、 computed 等选工页，这些都是可以公用的，在业务中，尤其是协同开发时非常有用，因为经常需要共享一些通用的信息，比如用户登录的昵称、性别、邮箱等，还有用户的授权 token 等。只需在初始化时让 bus 获取一次，任何时间、任何组件就可以从中直接使用了，在单页面富应用（ SPA ）中会很实用，也可以选择更好的状态管理解决方案vuex。</li>
<li>父链：在子组件中，使用 this.$parent 可以直接访问该组件的父实例或组件，父组件也可以通过this.$children 访问它所有的子组件，而且可以递归向上或向下无线访问， 直到根实例或最内层的组件。尽管 Vue 允许这样操作，但在业务中 ， 子组件应该尽可能地避免依赖父组件的数据，更不应该去主动修改它的数据，因为这样使得父子组件紧藕合，只看父组件，很难理解父组件的状态，因为它可能被任意组件修改 ， 理想情况下，只有组件自己能修改它的状态。父子组件最好还是通过props 和 $emit 来通信。</li>
<li>当子组件较多时 ，通过 this.$children 来一一遍历出我们需要的一个组件实例是比较困难的，尤其是组件动态渲染时，它们的序列是不固定的。 Vue 提供了子组件索引的方法，用特殊的属性 ref 来为子组件指定一个索引名称。通过父组件事件函数调用声明 $ref 子组件进行内容访问or修改。$refs只在组件渲染完成后才填充，并且它是非响应式的。它仅仅作为一个直接访问子组件的应急方案，应当避免在模板或计算属性中使用$refs。</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;app&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  {{message}}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">component-a</span>&gt;&lt;/<span style="color:#f92672">component-a</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">bus</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Vue</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Vue</span>.<span style="color:#a6e22e">component</span>(<span style="color:#e6db74">&#39;component-a&#39;</span>, {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">template</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;&lt;button @click=&#34;handleEvent&#34;&gt;传递事件&lt;/button&gt;&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">methods</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">handleEvent</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> () {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">bus</span>.<span style="color:#a6e22e">$emit</span>(<span style="color:#e6db74">&#39;on-message&#39;</span>, <span style="color:#e6db74">&#39;来自组件component-a的内容&#39;</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">app</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Vue</span>({
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">el</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;#app&#39;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">data</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>      },
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">mounted</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> () {
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">_this</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>;
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">bus</span>.<span style="color:#a6e22e">$on</span>(<span style="color:#e6db74">&#39;on-message&#39;</span>, <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">msg</span>) {
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">_this</span>.<span style="color:#a6e22e">message</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">msg</span>;
</span></span><span style="display:flex;"><span>          });
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/cn/2019/2019-03-08-vue-3/">Vue.js实战读书笔记（3）</a></span>
  <span class="nav-next"><a href="/cn/2019/2019-10-11-git-problems/">Git实际问题</a> &rarr;</span>
</nav>
<script type="text/javascript">
document.addEventListener('keyup', function(e) {
  if (e.target.nodeName.toUpperCase() != 'BODY') return;
  var url = false;
  if (e.which == 37) {  
    
    url = '\/cn\/2019\/2019-03-08-vue-3\/';
    
  } else if (e.which == 39) {  
    
    url = '\/cn\/2019\/2019-10-11-git-problems\/';
    
  }
  if (url) window.location = url;
});
</script>






<script async src="/js/fix-toc.js"></script>

<script async src="/js/center-img.js"></script>

<script async src="/js/right-quote.js"></script>

<script async src="/js/no-highlight.js"></script>

<script async src="/js/fix-footnote.js"></script>

<script async src="/js/math-code.js"></script>

<script async src="/js/external-link.js"></script>

<script async src="/js/alt-title.js"></script>

<script async src="/js/header-link.js"></script>



<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>


  























<script src="//cdn.jsdelivr.net/combine/gh/highlightjs/cdn-release@10.1.0/build/highlight.min.js,npm/@xiee/utils/js/load-highlight.js" defer></script>



  
  <hr>
  <div class="copyright">© <a href="/">Luo Hao</a> 2016 - 2024</div>
  
  </footer>
  </article>
  
  


  </body>
</html>

