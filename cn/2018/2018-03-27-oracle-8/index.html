<!DOCTYPE html>
<html lang="en-us">

  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Oracleå®è·µæ•°æ®åº“ç¬”è®°-8 - Rehoni | ç½—çš“</title>
    <meta property="og:title" content="Oracleå®è·µæ•°æ®åº“ç¬”è®°-8 - Rehoni | ç½—çš“">
    
    <meta name="twitter:card" content="summary">

    
    
      
    

    
      
      <meta property="description" content="oradebug dump controlf 3 oradebug setmypid oradebug tracefile_name
alter session set nls_language=american
[&amp;hellip;] è§ppt 126/383 alter system set control_files = &amp;hellip;">
      <meta property="og:description" content="oradebug dump controlf 3 oradebug setmypid oradebug tracefile_name
alter session set nls_language=american
[&amp;hellip;] è§ppt 126/383 alter system set control_files = &amp;hellip;">
      
    

    
    
    
    
    <meta name="twitter:image" content="//localhost:1313/images/logo.jpg">
    
    

    

    
    


<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/styles/monokai-sublime.min.css">



    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
<script async src="/js/load-typekit.js"></script>


<link rel="stylesheet" href="/css/custom.css" />

  </head>
  <body class="cn">
    <header class="masthead">
      

<h1><a href="/"><img src="/images/logo.jpg" alt="Luo Hao" /></a></h1>



      <nav class="menu">
  <ul>
  
  
  <li><a href="/">é¦–é¡µ</a></li>
  
  <li><a href="/cn/about/">å…³äº</a></li>
  
  <li><a href="/cn/">æ—¥å¿—</a></li>
  
  <li><a href="/categories/">åˆ†ç±»</a></li>
  
  <li><a href="/tags/">æ ‡ç­¾</a></li>
  
  <li><a href="/cn/vitae/">ç®€å†</a></li>
  
  <li><a href="/en/">English</a></li>
  
  

<li class="menu-extra"></li>



<li><a href="https://github.com/rehonicn%5c2018%5c2018-03-27-oracle-8.md" target="_blank">ç¼–è¾‘</a></li>


<li><a href="/cn/index.xml" type="application/rss+xml" title="RSS feed">è®¢é˜…</a></li>

<li><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="Attribution-NonCommercial-ShareAlike 4.0 International">ç‰ˆæƒ</a></li>


  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>Oracleå®è·µæ•°æ®åº“ç¬”è®°-8</h1>


<h3>Rehoni / 
2018-03-27</h3>

<hr>


      </header>





<h3 id="ç®¡ç†æ§åˆ¶æ–‡ä»¶">ç®¡ç†æ§åˆ¶æ–‡ä»¶</h3>
<ol>
<li>æ§åˆ¶æ–‡ä»¶çš„ä½œç”¨â“</li>
<li>æ§åˆ¶æ–‡ä»¶çš„å†…å®¹â“äºŒè¿›åˆ¶</li>
</ol>
<p>oradebug dump controlf 3
oradebug setmypid
oradebug tracefile_name</p>
<p>alter session set nls_language=american</p>
<ol start="3">
<li>æ§åˆ¶æ–‡ä»¶çš„å¤ç”¨ğŸ†—
å†…å®¹ä¸€æ¨¡ä¸€æ ·ï¼Œåšå¤šä¸ªåŒæ ·çš„æ§åˆ¶æ–‡ä»¶æ”¾åœ¨ä¸åŒçš„åœ°æ–¹</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">è§</span>ppt <span style="color:#ae81ff">126</span><span style="color:#f92672">/</span><span style="color:#ae81ff">383</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">system</span> <span style="color:#66d9ef">set</span> control_files <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;path1&#39;</span>,<span style="color:#e6db74">&#39;path2&#39;</span>,<span style="color:#e6db74">&#39;path3&#39;</span> <span style="color:#66d9ef">scope</span><span style="color:#f92672">=</span>spfile;
</span></span><span style="display:flex;"><span>    shutdown
</span></span><span style="display:flex;"><span>    cp <span style="color:#e6db74">&#39;path1&#39;</span><span style="color:#f92672">/</span><span style="color:#e6db74">&#39;path2&#39;</span> <span style="color:#e6db74">&#39;path3&#39;</span>;
</span></span><span style="display:flex;"><span>    startup
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">show</span> <span style="color:#66d9ef">parameter</span> control_files;
</span></span></code></pre></div><ol start="4">
<li>åˆ›å»ºæ§åˆ¶æ–‡ä»¶</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">database</span> backup controlfile <span style="color:#66d9ef">to</span> trace <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;e:\trace_controlf.txt&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">database</span> mount
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">åˆ é™¤æ§åˆ¶æ–‡ä»¶ä¹‹åå¯åŠ¨æŠ¥é”™å†å¯åŠ¨ä¸€ä¸‹è„šæœ¬</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">è¯­å¥åœ¨</span>trace_controlf.txté‡Œè¾¹è·‘ä¸€ä¸‹
</span></span></code></pre></div><p>å®éªŒï¼š</p>
<ol>
<li>æŸ¥çœ‹æ§åˆ¶æ–‡ä»¶çš„åç§°å’Œå†…å®¹ğŸ†—
select name &hellip;
show parameter control_files;
oradebug &hellip;è§ä¸Š</li>
<li>æ§åˆ¶æ–‡ä»¶çš„å¤ç”¨ğŸ†—</li>
<li>åˆ›å»ºæ§åˆ¶æ–‡ä»¶</li>
</ol>
<p><strong>ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œå†çœ‹å¤§ä½¬æ¼”ç¤ºä¸€ä¸‹è·‘ä¸€ä¸‹è„šæœ¬</strong></p>
<h3 id="ç®¡ç†æ—¥å¿—æ–‡ä»¶">ç®¡ç†æ—¥å¿—æ–‡ä»¶</h3>
<ol>
<li>
<p>æ—¥å¿—æ–‡ä»¶çš„ä½œç”¨</p>
</li>
<li>
<p>æ—¥å¿—å·¥ä½œä½“ç³»</p>
</li>
<li>
<p>æ—¥å¿—ç®¡ç†</p>
<p><strong>åŠ¡å¿…ææ¸…æ¥šä¸€ä¸‹switchå’Œcheckpointä¸¤æ¡å‘½ä»¤</strong> ğŸ˜‹</p>
<ul>
<li>æŸ¥è¯¢æ—¥å¿—æ–‡ä»¶ç»„ï¼Œæ—¥å¿—æ–‡ä»¶æˆå‘˜ï¼Œå½’æ¡£æ—¥å¿—ğŸ†—
descä¸€ä¸‹å°±çŸ¥é“äº†v$log v$logfile v$archived_log</li>
<li>æ·»åŠ æ—¥å¿—æ–‡ä»¶ç»„ğŸ†—</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>    <span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">database</span> <span style="color:#66d9ef">add</span> logfile <span style="color:#66d9ef">group</span> <span style="color:#ae81ff">4</span>;
</span></span></code></pre></div><ul>
<li>å‘æ—¥å¿—æ–‡ä»¶ç»„æ·»åŠ æˆå‘˜ğŸ†—</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>    <span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">database</span> <span style="color:#66d9ef">add</span> logfile member <span style="color:#e6db74">&#39;path&#39;</span> <span style="color:#66d9ef">to</span> <span style="color:#66d9ef">group</span> <span style="color:#ae81ff">4</span>;
</span></span></code></pre></div><ul>
<li>åˆ é™¤æ—¥å¿—æ–‡ä»¶æˆå‘˜ğŸ†—</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>    <span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">database</span> <span style="color:#66d9ef">drop</span> logfile member <span style="color:#e6db74">&#39;path&#39;</span> <span style="color:#66d9ef">to</span> <span style="color:#66d9ef">group</span> <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">group</span><span style="color:#f92672">#</span><span style="color:#960050;background-color:#1e0010">ï¼Œ</span>status <span style="color:#66d9ef">from</span> v$log;
</span></span></code></pre></div><ul>
<li>åˆ é™¤æ—¥å¿—æ–‡ä»¶ç»„ğŸ†—
æ—¥å¿—ç»„åˆ é™¤æ—¶æ—¥å¿—æ–‡ä»¶è¿˜åœ¨ä¸åœ¨ï¼š
å¦‚æœæ˜¯OMFæ—¥å¿—æ–‡ä»¶åˆ™ä¸åœ¨ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯åœ¨çš„</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>    <span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">database</span> <span style="color:#66d9ef">drop</span> logfile <span style="color:#66d9ef">group</span> <span style="color:#ae81ff">4</span>;
</span></span></code></pre></div><ul>
<li>æ¸…é™¤æ—¥å¿—æ–‡ä»¶ğŸ†—</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>    <span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">database</span> clear logfile <span style="color:#e6db74">&#39;path&#39;</span>;
</span></span></code></pre></div><ul>
<li>OMF æ²¡å¬
åˆ›å»ºä¸€ä¸ªè·¯å¾„æ”¾å…¥æ—¥å¿—æ–‡ä»¶ï¼ŒOMFå½¢å¼</li>
<li>è®¾ç½®å½’æ¡£æ¨¡å¼</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>    <span style="color:#75715e">---è¦åœ¨ mountæ¨¡å¼ä¸‹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    startup mount
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">database</span> archivelog;
</span></span><span style="display:flex;"><span>    archive log list;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">database</span> noarchivelog;
</span></span></code></pre></div><ul>
<li>è®¾ç½®å½’æ¡£ç›®çš„åœ°</li>
<li>æ‰‹åŠ¨å½’æ¡£</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>    <span style="color:#66d9ef">show</span> <span style="color:#66d9ef">parameter</span> log_archive
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">system</span> <span style="color:#66d9ef">set</span> log_archive_dest_1<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;location=path1&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">system</span> archieve log <span style="color:#66d9ef">current</span>
</span></span></code></pre></div><ul>
<li>ç§»åŠ¨æˆ–è€…é‡å‘½åæ—¥å¿—æ–‡ä»¶</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>    <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">group</span><span style="color:#f92672">#</span>, <span style="color:#66d9ef">from</span> v$logfile
</span></span><span style="display:flex;"><span>    shutdown immediateä¹‹åå‰ªåˆ‡<span style="color:#960050;background-color:#1e0010">ï¼ˆä»åŸè·¯å¾„ï¼‰ä¸€ä¸ª</span>logæ–‡ä»¶åˆ°åˆ«çš„ç›®å½•<span style="color:#960050;background-color:#1e0010">ï¼ˆç°åœ¨è·¯å¾„ï¼‰</span>
</span></span><span style="display:flex;"><span>    startup mountä¸æŠ¥é”™<span style="color:#960050;background-color:#1e0010">ï¼Œä¸æ£€æµ‹æ—¥å¿—æ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">database</span> openæŠ¥é”™<span style="color:#960050;background-color:#1e0010">ï¼Œçœ‹æŠ¥é”™ä¿¡æ¯ï¼Œæ‰¾</span>E:<span style="color:#960050;background-color:#1e0010">\</span>app<span style="color:#960050;background-color:#1e0010">\</span>Res0liya<span style="color:#960050;background-color:#1e0010">\</span>diag<span style="color:#960050;background-color:#1e0010">\</span>rdbms<span style="color:#960050;background-color:#1e0010">\</span>orcl<span style="color:#960050;background-color:#1e0010">\</span>orcl<span style="color:#960050;background-color:#1e0010">\</span>traceç›®å½•ä¸‹çš„alert_orcl.logçœ‹æŠ¥é”™ä¿¡æ¯<span style="color:#960050;background-color:#1e0010">ï¼Œä»ååˆ°å‰</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">select</span> menber <span style="color:#66d9ef">from</span> v$logfile
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">database</span> <span style="color:#66d9ef">rename</span> file <span style="color:#e6db74">&#39;åŸè·¯å¾„&#39;</span> <span style="color:#66d9ef">to</span> <span style="color:#e6db74">&#39;ç°åœ¨è·¯å¾„&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">database</span> openå°±ä¸æŠ¥é”™äº†
</span></span></code></pre></div><ul>
<li>ä¿®å¤æ—¥å¿—æ–‡ä»¶
<ul>
<li>éå½“å‰çš„æ–‡ä»¶å‡ºé—®é¢˜</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>    <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">group</span><span style="color:#f92672">#</span>,status <span style="color:#66d9ef">from</span> v$log;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">database</span> clear logfile <span style="color:#66d9ef">group</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">database</span> <span style="color:#66d9ef">open</span>
</span></span></code></pre></div><ul>
<li>å½“å‰çš„æ–‡ä»¶å‡ºé—®é¢˜</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>    recover <span style="color:#66d9ef">database</span> <span style="color:#66d9ef">until</span> cancel;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">database</span> <span style="color:#66d9ef">open</span>;<span style="color:#960050;background-color:#1e0010">æŠ¥é”™</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">database</span> <span style="color:#66d9ef">open</span> resetlogs;<span style="color:#960050;background-color:#1e0010">é‡æ–°åˆ›å»ºæ–°æ—¥å¿—æ–‡ä»¶</span>
</span></span></code></pre></div></li>
</ul>
</li>
</ol>
<h3 id="å…¶ä»–ä»£ç ">å…¶ä»–ä»£ç </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>    ORA<span style="color:#f92672">-</span><span style="color:#ae81ff">24324</span>: <span style="color:#960050;background-color:#1e0010">æœªåˆå§‹åŒ–æœåŠ¡å¥æŸ„</span>
</span></span><span style="display:flex;"><span>    ORA<span style="color:#f92672">-</span><span style="color:#ae81ff">01041</span>: <span style="color:#960050;background-color:#1e0010">å†…éƒ¨é”™è¯¯</span>, hostdef <span style="color:#960050;background-color:#1e0010">æ‰©å±•åä¸å­˜åœ¨</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">å‡ºç°</span>shutdowné—®é¢˜é‡‡ç”¨
</span></span><span style="display:flex;"><span>    shutdown <span style="color:#66d9ef">abort</span>
</span></span></code></pre></div>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/cn/2018/2018-03-23-oracle-7/">Oracleå®è·µæ•°æ®åº“ç¬”è®°-7</a></span>
  <span class="nav-next"><a href="/cn/2018/2018-03-30-oracle-9/">Oracleå®è·µæ•°æ®åº“ç¬”è®°-9</a> &rarr;</span>
</nav>
<script type="text/javascript">
document.addEventListener('keyup', function(e) {
  if (e.target.nodeName.toUpperCase() != 'BODY') return;
  var url = false;
  if (e.which == 37) {  
    
    url = '\/cn\/2018\/2018-03-23-oracle-7\/';
    
  } else if (e.which == 39) {  
    
    url = '\/cn\/2018\/2018-03-30-oracle-9\/';
    
  }
  if (url) window.location = url;
});
</script>






<script async src="/js/fix-toc.js"></script>

<script async src="/js/center-img.js"></script>

<script async src="/js/right-quote.js"></script>

<script async src="/js/no-highlight.js"></script>

<script async src="/js/fix-footnote.js"></script>

<script async src="/js/math-code.js"></script>

<script async src="/js/external-link.js"></script>

<script async src="/js/alt-title.js"></script>

<script async src="/js/header-link.js"></script>



<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>


  























<script src="//cdn.jsdelivr.net/combine/gh/highlightjs/cdn-release@10.1.0/build/highlight.min.js,npm/@xiee/utils/js/load-highlight.js" defer></script>



  
  <hr>
  <div class="copyright">Â© <a href="/">Luo Hao</a> 2016 - 2024</div>
  
  </footer>
  </article>
  
  


  </body>
</html>

